<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Seller Dashboard - BudgetSmart</title>
  <link rel="stylesheet" href="style.css"/>
  <style>
    .tabs { display: flex; background: #f1f1f1; border-radius: 10px; overflow: hidden; margin-bottom: 30px; }
    .tab { flex: 1; padding: 15px; text-align: center; cursor: pointer; font-weight: bold; transition: 0.3s; }
    .tab.active { background: #007bff; color: white; }
    .tab:hover:not(.active) { background: #ddd; }
    .tab-content { display: none; background: white; padding: 30px; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
    .tab-content.active { display: block; }
    .success { color:green; font-weight:bold; text-align:center; margin-top:15px; }
  </style>
</head>
<body>
  <div class="container">
    <h1 style="text-align:center; margin-bottom:10px;">Seller Dashboard</h1>
    <p style="text-align:center; color:#666; margin-bottom:30px;">Choose how you want to add your products</p>

    <div class="tabs">
      <div class="tab active" onclick="openTab('website')">Add via Website</div>
      <div class="tab" onclick="openTab('manual')">Add via Image + Price</div>
    </div>

    <!-- TAB 1: Website Only -->
    <div id="website" class="tab-content active">
      <h2>Connect Your Online Store</h2>
      <p>Weâ€™ll automatically list your products later</p>
      <form id="websiteForm">
        <input type="text" name="sellerName" placeholder="Store / Seller Name" required/>
        <input type="url" name="website" placeholder="https://yourstore.com" required/>
        <button type="submit" class="btn btn-primary">Connect Store</button>
      </form>
      <p id="msg1" class="success"></p>
    </div>

    <!-- TAB 2: Manual Upload -->
    <div id="manual" class="tab-content">
      <h2>Upload Item Manually</h2>
      <p>Add one item at a time with photo and price</p>
      <form id="manualForm" enctype="multipart/form-data">
        <input type="text" name="website" id="website" placeholder="mchris.ng or https://yourstore.com" required/>
        <input type="text" name="itemName" placeholder="Item Name (e.g. Wireless Earbuds)" required/>
        <input type="number" step="0.01" name="itemPrice" placeholder="Price ($)" required/>
        <input type="file" name="image" accept="image/*" required/>
        <button type="submit" class="btn btn-success">Add Item</button>
      </form>
      <p id="msg2" class="success"></p>
    </div>
  </div>

  <script>
    function openTab(tabName) {
      document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
      document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
      document.querySelector(`.tab[onclick="openTab('${tabName}')"]`).classList.add('active');
      document.getElementById(tabName).classList.add('active');
    }

    // Form 1: Website Only
    document.getElementById('websiteForm').onsubmit = async (e) => {
      e.preventDefault();
      const formData = new FormData(e.target);
      formData.append('type', 'website');

      const res = await fetch('/api/seller', { method: 'POST', body: formData });
      const json = await res.json();
      document.getElementById('msg1').textContent = json.success ? "Store connected! We'll fetch your items soon" : json.error;
      if (json.success) e.target.reset();
    };

    // Form 2: Manual Upload
    document.getElementById('manualForm').onsubmit = async (e) => {
      e.preventDefault();
      const formData = new FormData(e.target);
      formData.append('type', 'manual');

      const res = await fetch('/api/seller', { method: 'POST', body: formData });
      const json = await res.json();
      document.getElementById('msg2').textContent = json.success ? "Item added successfully!" : json.error;
      if (json.success) e.target.reset();
    };
  </script>
</body>
</html>
